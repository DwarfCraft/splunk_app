{
  "meta": {
    "name": "Splunk_TA_jmx",
    "displayName": "Splunk Add-On For JMX",
    "version": "4.0.0",
    "apiVersion": "3.4.2",
    "restRoot": "splunk_ta_jmx"
  },
  "pages": {
    "configuration": {
      "title": "Configuration",
      "description": "Manage JMX Servers and Collection Templates",
      "tabs": [
        {
          "name": "server",
          "title": "Server",
          "conf": "jmx_servers",
          "table": {
            "header": [
              {
                "field": "name",
                "label": "Name"
              },
              {
                "field": "description",
                "label": "Description"
              },
              {
                "field": "protocol",
                "label": "Connection"
              },
              {
                "field": "account_name",
                "label": "Account",
                "customCell": {
                  "src": "custom_account_validation_cell.3.3.0"
                }
              },
              {
                "field": "interval",
                "label": "Interval"
              },
              {
                "field": "destinationapp",
                "label": "App"
              }
            ],
            "actions": [
              "edit",
              "delete",
              "clone"
            ]
          },
          "entity": [
            {
              "field": "destinationapp",
              "label": "Destination App",
              "type": "singleSelect",
              "required": true,
              "options": {
                "disableSearch": false,
                "endpointUrl": "apps/local"
              },
              "defaultValue": "Splunk_TA_jmx",
              "validators": [
                {
                  "type": "string",
                  "errorMsg": "Length for Destination App field value must be between 1 and 255.",
                  "minLength": 1,
                  "maxLength": 255
                }
              ]
            },
            {
              "field": "name",
              "label": "Name",
              "type": "text",
              "required": true,
              "options": {
                "placeholder": "Name"
              },
              "validators": [
                {
                  "type": "string",
                  "errorMsg": "Length for Name field value must be between 1 and 255.",
                  "minLength": 1,
                  "maxLength": 255
                },
                {
                  "pattern": "^[a-zA-Z]\\w*$",
                  "errorMsg": "Value for Name field should not contain any special character.",
                  "type": "regex"
                }
              ]
            },
            {
              "field": "description",
              "label": "JVM Description",
              "type": "text",
              "required": false,
              "validators": [
                {
                  "type": "string",
                  "errorMsg": "The maximum length for JVM Description field value must be less than equal to 500.",
                  "minLength": 0,
                  "maxLength": 500
                }
              ]
            },
            {
              "field": "protocol",
              "label": "Connection Type",
              "type": "singleSelect",
              "required": true,
              "options": {
                "src": "customGroupSelectBoxControl",
                "autoCompleteFields": [
                  {
                    "label": "Attach to process",
                    "children": [
                      {
                        "value": "pidCommand",
                        "label": "Customized script"
                      },
                      {
                        "value": "pid",
                        "label": "Process id"
                      },
                      {
                        "value": "pidFile",
                        "label": "Process file"
                      }
                    ]
                  },
                  {
                    "label": "Specific protocol",
                    "children": [
                      {
                        "value": "url",
                        "label": "Use URL directly"
                      },
                      {
                        "value": "rmi",
                        "label": "rmi"
                      },
                      {
                        "value": "iiop",
                        "label": "iiop"
                      },
                      {
                        "value": "soap",
                        "label": "soap"
                      },
                      {
                        "value": "soapssl",
                        "label": "soap+ssl"
                      },
                      {
                        "value": "hessian",
                        "label": "hessian"
                      },
                      {
                        "value": "hessianssl",
                        "label": "hessian+ssl"
                      },
                      {
                        "value": "burlap",
                        "label": "burlap"
                      },
                      {
                        "value": "burlapssl",
                        "label": "burlap+ssl"
                      }
                    ]
                  }
                ]
              }
            },
            {
              "field": "stubSource",
              "label": "Stub Source",
              "type": "singleSelect",
              "required": false,
              "options": {
                "autoCompleteFields": [
                  {
                    "label": "jndi",
                    "value": "jndi"
                  },
                  {
                    "label": "ior",
                    "value": "ior"
                  },
                  {
                    "label": "stub",
                    "value": "stub"
                  }
                ],
                "display": false
              }
            },
            {
              "field": "encodedStub",
              "label": "Encoded Stub",
              "type": "text",
              "required": false,
              "options": {
                "display": false,
                "placeholder": "Encoded Stub of JMX server"
              },
              "validators": [
                {
                  "type": "string",
                  "errorMsg": "Length for Encoded Stub field value must be between 1 and 255.",
                  "minLength": 1,
                  "maxLength": 255
                }
              ]
            },
            {
              "field": "host",
              "label": "Host",
              "type": "text",
              "required": false,
              "options": {
                "display": false,
                "placeholder": "Host of JMX server"
              }
            },
            {
              "field": "jmxport",
              "label": "Port",
              "type": "text",
              "required": false,
              "validators": [
                {
                  "type": "regex",
                  "pattern": "^\\d+$",
                  "errorMsg": "Field JMX Port is not a number"
                },
                {
                  "type": "regex",
                  "pattern": "^([1-9][0-9]{0,3}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5])$",
                  "errorMsg": "Value for Port should be between 1 and 65535"
                }
              ],
              "options": {
                "display": false,
                "placeholder": "Port of JMX server"
              }
            },
            {
              "field": "lookupPath",
              "label": "Lookup Path",
              "type": "text",
              "required": false,
              "options": {
                "display": false,
                "placeholder": "Lookup path of JMX server"
              }
            },
            {
              "field": "pidCommand",
              "label": "Script Path",
              "type": "text",
              "required": false,
              "options": {
                "display": false,
                "placeholder": "Script path"
              }
            },
            {
              "field": "pid",
              "label": "Process Id",
              "type": "text",
              "required": false,
              "validators": [
                {
                  "type": "regex",
                  "pattern": "^\\d+$",
                  "errorMsg": "Field Process Id is not a number"
                },
                {
                  "type": "regex",
                  "pattern": "^([1-9][0-9]{0,3}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5])$",
                  "errorMsg": "Value for Process Id should be between 1 and 65535"
                }
              ],
              "options": {
                "display": false,
                "placeholder": "Process Value of JMX server"
              }
            },
            {
              "field": "pidFile",
              "label": "File Path",
              "type": "text",
              "required": false,
              "options": {
                "display": false,
                "placeholder": "file path"
              }
            },
            {
              "field": "jmx_url",
              "label": "URL",
              "type": "text",
              "required": false,
              "validators": [
                {
                  "type": "regex",
                  "pattern": "^service:jmx.*$",
                  "errorMsg": "URL should start with service:jmx"
                }
              ],
              "help": "JMX URL should start with service:jmx",
              "options": {
                "display": false,
                "placeholder": "URL of the JMX server"
              }
            },
            {
              "field": "account_name",
              "label": "Username",
              "type": "text",
              "required": false,
              "options": {
                "display": false,
                "placeholder": "username"
              },
              "validators": [
                {
                  "type": "string",
                  "errorMsg": "Length for Username field value must be between 1 and 255.",
                  "minLength": 1,
                  "maxLength": 255
                }
              ]
            },
            {
              "field": "account_password",
              "label": "Password",
              "type": "text",
              "required": false,
              "encrypted": true,
              "options": {
                "encrypt": true,
                "display": false
              },
              "validators": [
                {
                  "type": "string",
                  "errorMsg": "Length for Password field value must be between 1 and 255.",
                  "minLength": 1,
                  "maxLength": 255
                }
              ]
            },
            {
              "field": "interval",
              "label": "Server Interval",
              "type": "text",
              "required": false,
              "validators": [
                {
                  "type": "number",
                  "range": [
                    1,
                    31536000
                  ],
                  "errorMsg": "Server Interval must be a number greater than 0."
                }
              ],
              "options": {
                "placeholder": "Overrides the task polling interval"
              }
            },
            {
              "field": "help",
              "type": "helpLink",
              "label": "",
              "options": {
                "text": "Learn more about server credential validation",
                "link": "https://docs.splunk.com/Documentation/AddOns/released/JMX/Troubleshooting"
              }
            }
          ],
          "hook": {
            "src": "server_hook.3.3.0"
          }
        },
        {
          "name": "template",
          "title": "Template",
          "conf": "jmx_templates",
          "table": {
            "header": [
              {
                "field": "name",
                "label": "Name"
              },
              {
                "field": "description",
                "label": "Description"
              },
              {
                "field": "destinationapp",
                "label": "App"
              }
            ],
            "actions": [
              "edit",
              "delete",
              "clone"
            ]
          },
          "entity": [
            {
              "field": "destinationapp",
              "label": "Destination App",
              "type": "singleSelect",
              "required": true,
              "options": {
                "disableSearch": false,
                "endpointUrl": "apps/local"
              },
              "defaultValue": "Splunk_TA_jmx"
            },
            {
              "field": "name",
              "label": "Name",
              "type": "text",
              "required": true,
              "options": {
                "placeholder": "Name"
              },
              "validators": [
                {
                  "type": "string",
                  "errorMsg": "Length for Name field value must be between 1 and 255.",
                  "minLength": 1,
                  "maxLength": 255
                },
                {
                  "type": "regex",
                  "pattern": "^[a-zA-Z]\\w*$",
                  "errorMsg": "Value for Name field should not contain any special character."
                }
              ]
            },
            {
              "field": "description",
              "label": "Description",
              "type": "text",
              "required": false,
              "validators": [
                {
                  "type": "string",
                  "errorMsg": "The maximum length for Description field value must be less than equal to 500.",
                  "minLength": 0,
                  "maxLength": 500
                }
              ]
            },
            {
              "field": "content",
              "label": "Content",
              "type": "custom",
              "required": true,
              "options": {
                "src": "textarea_control.3.3.0"
              }
            }
          ],
          "hook": {
            "src": "template_hook.3.3.0"
          }
        },
        {
          "entity": [
            {
              "defaultValue": "INFO",
              "field": "loglevel",
              "required": true,
              "help": "(DEBUG, INFO, WARN, ERROR or CRITICAL)",
              "options": {
                "autoCompleteFields": [
                  {
                    "value": "DEBUG",
                    "label": "DEBUG"
                  },
                  {
                    "value": "INFO",
                    "label": "INFO"
                  },
                  {
                    "value": "WARNING",
                    "label": "WARNING"
                  },
                  {
                    "value": "ERROR",
                    "label": "ERROR"
                  },
                  {
                    "value": "CRITICAL",
                    "label": "CRITICAL"
                  }
                ],
                "disableSearch": true
              },
              "type": "singleSelect",
              "label": "Log level"
            }
          ],
          "title": "Logging",
          "name": "logging"
        }
      ]
    },
    "inputs": {
      "title": "Inputs",
      "description": "Manage JMX Inputs",
      "table": {
        "header": [
          {
            "field": "name",
            "label": "Name"
          },
          {
            "field": "description",
            "label": "Description"
          },
          {
            "field": "servers",
            "label": "Servers",
            "customCell": {
              "src": "custom_account_validation_cell.3.3.0"
            }
          },
          {
            "field": "templates",
            "label": "Templates",
            "customCell": {
              "src": "custom_missing_template_validation_cell.3.3.0"
            }
          },
          {
            "field": "interval",
            "label": "Interval"
          },
          {
            "field": "index",
            "label": "Index"
          },
          {
            "field": "sourcetype",
            "label": "Source Type"
          },
          {
            "field": "destinationapp",
            "label": "App"
          },
          {
            "field": "disabled",
            "label": "Status",
            "mapping": {
              "false": "Enabled",
              "true": "Disabled"
            }
          }
        ],
        "actions": [
          "edit",
          "enable",
          "delete",
          "clone"
        ]
      },
      "services": [
        {
          "name": "jmx",
          "title": "Input",
          "conf": "jmx_tasks",
          "entity": [
            {
              "field": "destinationapp",
              "label": "Destination App",
              "type": "singleSelect",
              "required": true,
              "options": {
                "disableSearch": false,
                "endpointUrl": "apps/local"
              },
              "defaultValue": "Splunk_TA_jmx"
            },
            {
              "field": "name",
              "label": "Name",
              "type": "text",
              "required": true,
              "validators": [
                {
                  "type": "string",
                  "minLength": 1,
                  "maxLength": 255,
                  "errorMsg": "Length of Name is restricted from 1 to 255."
                },
                {
                  "type": "regex",
                  "pattern": "^[a-zA-Z]\\w*$",
                  "errorMsg": "Value for Name field should not contain any special character."
                }
              ],
              "options": {
                "placeholder": "Name"
              }
            },
            {
              "field": "description",
              "label": "Description",
              "type": "text",
              "required": false,
              "validators": [
                {
                  "type": "string",
                  "errorMsg": "The maximum length for Description field value must be less than equal to 500.",
                  "minLength": 0,
                  "maxLength": 500
                }
              ]
            },
            {
              "field": "interval",
              "label": "Polling Interval",
              "type": "text",
              "required": true,
              "defaultValue": 60,
              "validators": [
                {
                  "type": "number",
                  "range": [
                    1,
                    31536000
                  ],
                  "errorMsg": "Polling Interval must be a number greater than 0."
                }
              ]
            },
            {
              "field": "sourcetype",
              "label": "Source Type",
              "type": "text",
              "required": true,
              "defaultValue": "jmx",
              "options": {
                "placeholder": "Source Type"
              }
            },
            {
              "type": "singleSelect",
              "label": "Index",
              "validators": [
                {
                  "type": "string",
                  "errorMsg": "Length of index name should be between 1 and 80.",
                  "minLength": 1,
                  "maxLength": 80
                }
              ],
              "defaultValue": "default",
              "options": {
                "endpointUrl": "data/indexes",
                "blackList": "^_.*$",
                "createSearchChoice": true
              },
              "field": "index",
              "required": true
            },
            {
              "field": "servers",
              "label": "Servers",
              "type": "custom",
              "required": false,
              "options": {
                "src": "input_tab_hook.3.3.0"
              }
            },
            {
              "field": "templates",
              "label": "Templates",
              "type": "text",
              "required": false,
              "options": {
                "display": false
              }
            },
            {
              "field": "help",
              "type": "helpLink",
              "label": "",
              "options": {
                "text": "Learn about avoiding data duplication",
                "link": "https://docs.splunk.com/Documentation/AddOns/released/JMX/Troubleshooting"
              }
            }
          ],
          "hook": {
            "src": "input_hook.3.3.0"
          }
        }
      ]
    }
  }
}